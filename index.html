<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Jeu d'évitement</title>
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f0f0f0;
    }
    #gameArea {
        position: relative;
        width: 400px;
        height: 600px;
        margin: 50px auto;
        background-color: #fff;
        border: 2px solid #333;
        overflow: hidden;
    }
    #player {
        width: 40px;
        height: 40px;
        background-color: blue;
        position: absolute;
        bottom: 10px;
        left: 180px;
    }
    .obstacle {
        width: 40px;
        height: 40px;
        background-color: red;
        position: absolute;
        top: 0;
    }
    #score {
        font-size: 24px;
        margin-top: 20px;
    }
    button {
        margin-top: 20px;
        font-size: 16px;
        padding: 10px 20px;
        cursor: pointer;
    }
</style>
</head>
<body>
<h1>Jeu d'évitement</h1>
<div id="gameArea">
    <div id="player"></div>
</div>
<div id="score">Score : 0</div>
<button id="startBtn">Démarrer le jeu</button>

<script>
const gameArea = document.getElementById('gameArea');
const player = document.getElementById('player');
const scoreDisplay = document.getElementById('score');
const startBtn = document.getElementById('startBtn');

let obstacles = [];
let score = 0;
let gameOver = false;
let gameInterval;

const playerSpeed = 10;
const obstacleSpeed = 4;

document.addEventListener('keydown', (e) => {
    const left = parseInt(player.style.left);
    if (e.key === 'ArrowLeft' && left > 0) {
        player.style.left = left - playerSpeed + 'px';
    } else if (e.key === 'ArrowRight' && left < gameArea.clientWidth - player.clientWidth) {
        player.style.left = left + playerSpeed + 'px';
    }
});

function createObstacle() {
    const obstacle = document.createElement('div');
    obstacle.classList.add('obstacle');
    obstacle.style.left = Math.random() * (gameArea.clientWidth - 40) + 'px';
    gameArea.appendChild(obstacle);
    obstacles.push(obstacle);
}

function moveObstacles() {
    obstacles.forEach((obs, index) => {
        obs.style.top = (parseInt(obs.style.top) || 0) + obstacleSpeed + 'px';
        if (parseInt(obs.style.top) > gameArea.clientHeight) {
            obs.remove();
            obstacles.splice(index, 1);
            score++;
            scoreDisplay.textContent = 'Score : ' + score;
        }

        // Collision detection
        const obsRect = obs.getBoundingClientRect();
        const playerRect = player.getBoundingClientRect();
        if (!(obsRect.right < playerRect.left ||
              obsRect.left > playerRect.right ||
              obsRect.bottom < playerRect.top ||
              obsRect.top > playerRect.bottom)) {
            endGame();
        }
    });
}

function endGame() {
    clearInterval(gameInterval);
    obstacles.forEach(o => o.remove());
    obstacles = [];
    gameOver = true;
    alert('Game Over ! Ton score : ' + score);
}

function startGame() {
    score = 0;
    gameOver = false;
    scoreDisplay.textContent = 'Score : 0';
    player.style.left = '180px';
    gameInterval = setInterval(() => {
        if (Math.random() < 0.03) createObstacle();
        moveObstacles();
    }, 20);
}

startBtn.addEventListener('click', startGame);
</script>
</body>
</html>
